{% extends "base.html" %}
{% load render_table from django_tables2 %}
{% load humanize %}
{% load mathfilters %}
{% block content %}
{% load staticfiles %}

<!-- DataTables CSS -->
<!--<link rel="stylesheet" type="text/css" href="{% static 'DataTables-1.10.4/media/css/jquery.dataTables.css' %}">-->
<link rel="stylesheet" type="text/css" href="{% static 'DataTables-1.10.4/dataTables.bootstrap.css' %}">
<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="{% static 'DataTables-1.10.4/media/js/jquery.dataTables.js' %}"></script>
<script type="text/javascript" charset="utf8" src="{% static 'DataTables-1.10.4/dataTables.bootstrap.js' %}"></script>


<style>
    body {
  padding-top: 60px;
}
@media (max-width: 979px) {
  body {
    padding-top: 0px;
  }
}
</style>


<body>
    <div class="container-fluid">
              
    
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Accuracy for {{ recent_city_sales.0.home.city }}'s Most Recent Sales</h1>
                    <div class="table-responsive"> <!--Twitter view-->
                        <table id="recent_sales_table" class="table table-striped">
                            <thead>
                              <tr>
                                <th>Home Address</th>
                                <th>Sold Date</th>
                                <th>Sold Price</th>
                                
                                <th>EazyHouz Estimate ($)</th>
                                <th>Error</th>
                              </tr>
                            </thead>
                            <tbody>
                                {% for h in recent_city_sales %}
                                    <tr
                                        {% if h.error < -0.25 or h.error > 0.25 %}
                                            class="danger"
                                            {% else %}
                                                class="success"
                                            {% endif %}>
                                        <td><a href="/home/genappraisal/?pid={{h.home.id}}">{{ h.home.address }}</a></td>
                                        <td>{{ h.home.last_sale_date}}</td>
                                        <td>{{ h.list_price |floatformat:"0" |intcomma}}</td>
                                        <td>{{ h.predicted_price|floatformat:"0" |intcomma }}</td>
                                        
                                        <td
                                            >{{ h.error|mul:-100|floatformat:"0" }}%</td></tr>
                                        
                                {% endfor %}
                            </tbody>
                        </table>
                        
                    </div> <!--table div ends-->  
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
</body>


<script type="text/javascript">
$(document).ready(function() {

    console.log('Document ready');       
       
    var table = $('#recent_sales_table').DataTable({
        'paging': false,
        'order': [
            [1, 'desc']
        ]
    }); //TODOTODAY

});//end document.ready    
</script>



{% endblock %}
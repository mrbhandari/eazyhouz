
{% extends "base.html" %}
{% load staticfiles %}
{% block content %}
{% load humanize %}
{% load mathfilters %}
{% load render_table from django_tables2 %}
<link href="{% static 'dashboard.css' %}" rel="stylesheet" media="screen">

<body>


    <div class="container-fluid">
      <div class="row">
        
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar" id="sidenav">
            <li class="active"><a href="#">Overview</a></li> <!--TODO: active does not move-->
            <li><a href="#estimate_explanation">Estimate Explanation</a></li>
            <li><a href="#recent_sales">Recent Sales</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="#instagram">Instagram</a></li>
            <li><a href="#yelp">Yelp</a></li>
            <li><a href="#twitter">Recent Tweets</a></li>
            <li><a href="#foursquare">Foursquare</a></li>
            <li><a href="#eventful">Eventful</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="#">Nav item again</a></li>
            <li><a href="#">One more nav</a></li>
            <li><a href="#">Another nav item</a></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <h1 class="page-header"> Home Estimate Report: {{ subject_home.address }} </h1>
          
        <h3>{% if result.estimated_price %}${% endif %}
        {{result.estimated_price | intcomma}}</h3>
        <p><strong>{{ subject_home.address }}</strong>
        <br>Alternate Estimate: <strong>{{ subject_home.last_zestimate | intcomma }}</strong>
        <br><br>
          
          
          
          
          <div class="row placeholders">
            <div class="col-xs-6 col-sm-3 placeholder">
              <img src="{{subject_home.image_url}}" class="img-responsive" alt="Generic placeholder thumbnail">
              <h4>{{subject_home.address}}</h4>
              <span class="text-muted">Subject Property</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <img src="{{result.home1.image_url}}" class="img-responsive" alt="Generic placeholder thumbnail">
              <a href="/home/genappraisal/?pid={{ result.home1.id }}"><h4>{{ result.home1.address }}</h4></a>
              <span class="text-muted">Comparable #1</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <img src="{{result.home2.image_url}}" class="img-responsive" alt="Generic placeholder thumbnail">
              <a href="/home/genappraisal/?pid={{ result.home2.id }}"><h4>{{ result.home2.address }}</h4></a>
              <span class="text-muted">Comparable #2</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <img src="{{result.home3.image_url}}" class="img-responsive" alt="Generic placeholder thumbnail">
              <a href="/home/genappraisal/?pid={{ result.home3.id }}"><h4>{{ result.home3.address }}</h4></a>
              <span class="text-muted">Comparable #3</span>
            </div>
          </div> <!--images row-->
          
          
        <h2 class="sub-header" id="estimate_explanation">Estimate Explanation</h2>
        <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Original</th>
                  <th>Comparable #1</th>
                  <th>Comparable #2</th>
                  <th>Comparable #3</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Address</td>
                  <td>{{subject_home.address}}</td>
                  <td>{{result.home1.address}}</td>
                  <td>{{result.home2.address}}</td>
                  <td>{{result.home3.address}}</td>                  
                </tr>
                <tr>
                  <td>City</td>
                  <td>{{subject_home.city}}</td>
                  <td>{{result.home1.city}}</td>
                  <td>{{result.home2.city}}</td>
                  <td>{{result.home3.city}}</td>                  
                </tr>
                <tr>
                  <td>Last Sale Price</td>
                  <td>${{subject_home.sale_price | intcomma}}</td>
                  <td>${{result.home1.sale_price | intcomma}}</td>
                  <td>${{result.home2.sale_price | intcomma}}</td>
                  <td>${{result.home3.sale_price | intcomma}}</td>                  
                </tr>
                <tr>
                  <td>Last Sale Date</td>
                  <td>{{subject_home.last_sale_date}}</td>
                  <td>{{result.home1.last_sale_date}}</td>
                  <td>{{result.home2.last_sale_date}}</td>
                  <td>{{result.home3.last_sale_date}}</td> 
                </tr>
                <tr>
                  <td>Beds</td>
                  <td>{{subject_home.beds}}</td>
                  <td>{{result.home1.beds}}</td>
                  <td>{{result.home2.beds}}</td>
                  <td>{{result.home3.beds}}</td> 
                </tr>
                <tr>
                  <td>Baths</td>
                  <td>{{subject_home.baths}}</td>
                  <td>{{result.home1.baths}}</td>
                  <td>{{result.home2.baths}}</td>
                  <td>{{result.home3.baths}}</td> 
                </tr>
                <tr>
                  <td>Sqft</td>
                  <td>{{subject_home.sqft |intcomma}}</td>
                  <td>{{result.home1.sqft |intcomma}}</td>
                  <td>{{result.home2.sqft|intcomma}}</td>
                  <td>{{result.home3.sqft|intcomma}}</td> 
                </tr>
                <tr>
                  <td id="goreport">Year Built</td>
                  <td>{{subject_home.year_built}}</td>
                  <td>{{result.home1.year_built}}</td>
                  <td>{{result.home2.year_built}}</td>
                  <td>{{result.home3.year_built}}</td> 
                </tr>
              </tbody>
            </table>
          </div> <!-- end responsive table-->
        
         
         
         
        
        <h2 class="sub-header" id="recent_sales">Recent Sales</h2>
        <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Original</th>
                  <th>Stat #1</th>
                  <th>Stat #2</th>
                  <th>Stat #3</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Home 1</td>
                  <td>100</td>
                  <td>2002</td>
                  <td>300</td>
                  <td>400</td>                  
                </tr>
                <tr>
                  <td>Home 2</td>
                  <td>100</td>
                  <td>200</td>
                  <td>300</td>
                  <td>400</td>                  
                </tr>
              </tbody>
            </table>
          </div>
        
        
        
       
        <h2 class="sub-header" id=instagram>Instagram posts within 1000m</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <tbody>
                    {% for r in instagram_r %}
                        {% cycle '<tr>' '' '' '' %}
                        <td><a href="{{r.sri}}"><img data-src="holder.js/200x200" src="{{r.lri}}" class="img-thumbnail" alt="Instagram Img"></a></td>
                        {% cycle '' '' '' '</tr>' %}
                    {% endfor %}
                </tbody>
            </table>
        </div> <!--table div ends-->
       
        
        <h2 class="sub-header" id="yelp">Yelp within 1000m</h2>

            <!--alternate view-->
                <div class="row list-group">
                    {% for r in yelp_r.businesses %}
                    <div class="item  col-xs-3 col-lg-3" style="height:300px; overflow: auto;">
                        <div class="img-responsive">
                            <img class="img-thumbnail" style="height: 175px" src="{{r.image_url}}" alt="{{r.snippet_text}}" />
                            <div class="caption">
                                <h4 class="group inner list-group-item-heading">
                                    <a href="{{r.url}}">{{r.name}}</a> ({{r.distance|intdiv:1 |floatformat:"0"}} m)</h4>
                                <p class="group inner list-group-item-text">
                                    {% for i in r.categories %}
                                    {% with i|first as first_doc %}{{ first_doc }}{% endwith %}
                                    {% endfor %}</p>
                                <div class="row">
                                    
                                    <div class="col-xs-12 col-md-12">
                                        <p><img class="img-responsive" src="{{r.rating_img_url_large}}"></a>({{r.review_count}})</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>                        
                    {% endfor %}                    
                </div> <!--end alternate view-->
            

       
        <h2 class="sub-header" id=twitter>Recent Tweets</h2>
        <div class="table-responsive">
            <table class="table table-striped">
                <tbody>
                    {% for r in twitter_r %}
                        {% cycle '<tr>' '' '' '' %}
                        <td>{{ r }}</td>
                        {% cycle '' '' '' '</tr>' %}
                    {% endfor %}
                </tbody>
            </table>
        </div> <!--table div ends-->


        <h2 class="sub-header" id=foursquare>Foursquare within 1000m</h2>
        
        {% render_table table %}
        
        
        
        <h2 class="sub-header" id="eventful">Eventful within 1000m</h2>

            <!--alternate view-->
                <div class="row list-group">
                    {% for r in eventful_r %}
                    <div class="item  col-xs-3 col-lg-3" style="height:300px; overflow: auto;">
                        <div class="img-responsive">
                            <img class="img-thumbnail" style="height: 175px" src="{{r.image_url}}" alt="{{r.description}}" />
                            <div class="caption">
                                <h4 class="group inner list-group-item-heading">
                                    <a href="{{r.url}}">{{r.title}}</a></h4>
                                <p class="group inner list-group-item-text">
                                    {{ r.start_time }} <br> {{ r.calendar_count }}

                                <div class="row">

                                </div>
                            </div>
                        </div>
                    </div>                        
                    {% endfor %}                    
                </div> <!--end alternate view-->
            
        
        
        
        
        
        
        
        
        
        
        
        
        </div>
      </div>
    </div>
    
       
        </div>
      </div>
    </div>
        
     
        
        
    </div>
</body>

    <script>
            $( document ).ready(function() {
            console.log("TEST1")
            $("#sidenav ul li a[href^='#']").on('click', function(e) {
            console.log("TEST")
            // prevent default anchor click behavior
            e.preventDefault();
            
            // store hash
            var hash = this.hash;
            
            console.log(this.hash)
            
            // animate
            $('html, body').animate({
            scrollTop: $(this.hash).offset().top
            }, 300, function(){
            
            // when done, add hash to url
            // (default click behaviour)
            window.location.hash = hash;
            });
            
            });//end nav element selector
            
            });//end document.ready
    </script>

{% endblock %}
